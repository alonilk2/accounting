/**
 * Accessibility CSS Styles for Visually Impaired Users
 * Provides high contrast, large text, reduced motion, and enhanced focus styles
 */

/* Base accessibility styles */
.accessibility-styles {
  /* Enhanced focus indicators */
  --accessibility-focus-width: 3px;
  --accessibility-focus-color: #0066cc;
  --accessibility-focus-offset: 2px;
  
  /* High contrast colors */
  --accessibility-bg-high-contrast: #000000;
  --accessibility-text-high-contrast: #ffffff;
  --accessibility-border-high-contrast: #ffffff;
  --accessibility-focus-high-contrast: #ffff00;
  
  /* Font size scaling */
  --accessibility-font-scale: 1;
  --accessibility-line-height-scale: 1.2;
  
  /* Motion settings */
  --accessibility-transition-duration: 0.3s;
  --accessibility-animation-duration: 0.6s;
}

/* High contrast mode */
html.accessibility-high-contrast {
  background: var(--accessibility-bg-high-contrast) !important;
  color: var(--accessibility-text-high-contrast) !important;
}

html.accessibility-high-contrast * {
  background-color: var(--accessibility-bg-high-contrast) !important;
  color: var(--accessibility-text-high-contrast) !important;
  border-color: var(--accessibility-border-high-contrast) !important;
  box-shadow: none !important;
}

html.accessibility-high-contrast img,
html.accessibility-high-contrast svg,
html.accessibility-high-contrast .MuiSvgIcon-root {
  filter: invert(1) contrast(2) !important;
}

html.accessibility-high-contrast input,
html.accessibility-high-contrast textarea,
html.accessibility-high-contrast select,
html.accessibility-high-contrast button {
  background: var(--accessibility-bg-high-contrast) !important;
  color: var(--accessibility-text-high-contrast) !important;
  border: 2px solid var(--accessibility-border-high-contrast) !important;
}

html.accessibility-high-contrast .MuiPaper-root,
html.accessibility-high-contrast .MuiCard-root,
html.accessibility-high-contrast .MuiDialog-paper {
  background: var(--accessibility-bg-high-contrast) !important;
  border: 2px solid var(--accessibility-border-high-contrast) !important;
}

/* Large text mode */
html.accessibility-large-text {
  font-size: calc(1rem * var(--accessibility-font-scale, 1.25)) !important;
  line-height: calc(1.5 * var(--accessibility-line-height-scale, 1.3)) !important;
}

html.accessibility-large-text h1 {
  font-size: calc(2.5rem * var(--accessibility-font-scale, 1.25)) !important;
}

html.accessibility-large-text h2 {
  font-size: calc(2rem * var(--accessibility-font-scale, 1.25)) !important;
}

html.accessibility-large-text h3 {
  font-size: calc(1.75rem * var(--accessibility-font-scale, 1.25)) !important;
}

html.accessibility-large-text h4 {
  font-size: calc(1.5rem * var(--accessibility-font-scale, 1.25)) !important;
}

html.accessibility-large-text h5 {
  font-size: calc(1.25rem * var(--accessibility-font-scale, 1.25)) !important;
}

html.accessibility-large-text h6 {
  font-size: calc(1rem * var(--accessibility-font-scale, 1.25)) !important;
}

html.accessibility-large-text .MuiButton-root {
  font-size: calc(0.875rem * var(--accessibility-font-scale, 1.25)) !important;
  padding: calc(10px * var(--accessibility-font-scale, 1.25)) calc(20px * var(--accessibility-font-scale, 1.25)) !important;
}

html.accessibility-large-text .MuiTextField-root input,
html.accessibility-large-text .MuiTextField-root textarea {
  font-size: calc(1rem * var(--accessibility-font-scale, 1.25)) !important;
  padding: calc(16px * var(--accessibility-font-scale, 1.25)) !important;
}

html.accessibility-large-text .MuiDataGrid-root {
  font-size: calc(0.875rem * var(--accessibility-font-scale, 1.25)) !important;
}

html.accessibility-large-text .MuiDataGrid-cell {
  padding: calc(8px * var(--accessibility-font-scale, 1.25)) !important;
}

/* Add comprehensive text scaling for all components */
html[data-accessibility-font-size="large"] .MuiTypography-root,
html[data-accessibility-font-size="extra-large"] .MuiTypography-root,
html.accessibility-large-text .MuiTypography-root {
  font-size: calc(1em * var(--accessibility-font-scale)) !important;
}

html[data-accessibility-font-size="large"] .MuiButton-root,
html[data-accessibility-font-size="extra-large"] .MuiButton-root,
html.accessibility-large-text .MuiButton-root {
  font-size: calc(0.875rem * var(--accessibility-font-scale)) !important;
}

html[data-accessibility-font-size="large"] .MuiChip-root,
html[data-accessibility-font-size="extra-large"] .MuiChip-root,
html.accessibility-large-text .MuiChip-root {
  font-size: calc(0.8125rem * var(--accessibility-font-scale)) !important;
}

html[data-accessibility-font-size="large"] .MuiListItemText-primary,
html[data-accessibility-font-size="extra-large"] .MuiListItemText-primary,
html.accessibility-large-text .MuiListItemText-primary {
  font-size: calc(1rem * var(--accessibility-font-scale)) !important;
}

html[data-accessibility-font-size="large"] .MuiMenuItem-root,
html[data-accessibility-font-size="extra-large"] .MuiMenuItem-root,
html.accessibility-large-text .MuiMenuItem-root {
  font-size: calc(1rem * var(--accessibility-font-scale)) !important;
}

/* Apply font scaling to all text elements */
html[data-accessibility-font-size="large"] *,
html[data-accessibility-font-size="extra-large"] *,
html.accessibility-large-text * {
  font-size: calc(1em * var(--accessibility-font-scale)) !important;
  line-height: calc(1.5 * var(--accessibility-line-height-scale, 1.3)) !important;
}

/* Specific overrides for UI components that need special handling */
html[data-accessibility-font-size="large"] [style*="fontSize"],
html[data-accessibility-font-size="extra-large"] [style*="fontSize"],
html.accessibility-large-text [style*="fontSize"] {
  font-size: calc(1em * var(--accessibility-font-scale)) !important;
}

/* Override inline styles with hardcoded font sizes */
html[data-accessibility-font-size="large"] [style*="fontSize: '1.25rem'"],
html[data-accessibility-font-size="large"] [style*="fontSize: 1.25rem"],
html[data-accessibility-font-size="extra-large"] [style*="fontSize: '1.25rem'"],
html[data-accessibility-font-size="extra-large"] [style*="fontSize: 1.25rem"],
html.accessibility-large-text [style*="fontSize: '1.25rem'"],
html.accessibility-large-text [style*="fontSize: 1.25rem"] {
  font-size: calc(1.25rem * var(--accessibility-font-scale)) !important;
}

html[data-accessibility-font-size="large"] [style*="fontSize: '0.875rem'"],
html[data-accessibility-font-size="large"] [style*="fontSize: 0.875rem"],
html[data-accessibility-font-size="extra-large"] [style*="fontSize: '0.875rem'"],
html[data-accessibility-font-size="extra-large"] [style*="fontSize: 0.875rem"],
html.accessibility-large-text [style*="fontSize: '0.875rem'"],
html.accessibility-large-text [style*="fontSize: 0.875rem"] {
  font-size: calc(0.875rem * var(--accessibility-font-scale)) !important;
}

html[data-accessibility-font-size="large"] [style*="fontSize: '0.85rem'"],
html[data-accessibility-font-size="large"] [style*="fontSize: 0.85rem"],
html[data-accessibility-font-size="extra-large"] [style*="fontSize: '0.85rem'"],
html[data-accessibility-font-size="extra-large"] [style*="fontSize: 0.85rem"],
html.accessibility-large-text [style*="fontSize: '0.85rem'"],
html.accessibility-large-text [style*="fontSize: 0.85rem"] {
  font-size: calc(0.85rem * var(--accessibility-font-scale)) !important;
}

html[data-accessibility-font-size="large"] [style*="fontSize: '0.7rem'"],
html[data-accessibility-font-size="large"] [style*="fontSize: 0.7rem"],
html[data-accessibility-font-size="extra-large"] [style*="fontSize: '0.7rem'"],
html[data-accessibility-font-size="extra-large"] [style*="fontSize: 0.7rem"],
html.accessibility-large-text [style*="fontSize: '0.7rem'"],
html.accessibility-large-text [style*="fontSize: 0.7rem"] {
  font-size: calc(0.7rem * var(--accessibility-font-scale)) !important;
}

/* Enhanced focus indicators */
html.accessibility-enhanced-focus *:focus,
html.accessibility-enhanced-focus *:focus-visible {
  outline: var(--accessibility-focus-width) solid var(--accessibility-focus-color) !important;
  outline-offset: var(--accessibility-focus-offset) !important;
  box-shadow: 0 0 0 calc(var(--accessibility-focus-width) + 2px) rgba(0, 102, 204, 0.2) !important;
}

html.accessibility-enhanced-focus.accessibility-high-contrast *:focus,
html.accessibility-enhanced-focus.accessibility-high-contrast *:focus-visible {
  outline-color: var(--accessibility-focus-high-contrast) !important;
  box-shadow: 0 0 0 calc(var(--accessibility-focus-width) + 2px) rgba(255, 255, 0, 0.3) !important;
}

/* Enhanced focus for custom components */
.accessibility-focus-enhanced {
  outline: var(--accessibility-focus-width) solid var(--accessibility-focus-color) !important;
  outline-offset: var(--accessibility-focus-offset) !important;
  box-shadow: 0 0 0 calc(var(--accessibility-focus-width) + 2px) rgba(0, 102, 204, 0.2) !important;
  position: relative !important;
  z-index: 1000 !important;
}

html.accessibility-high-contrast .accessibility-focus-enhanced {
  outline-color: var(--accessibility-focus-high-contrast) !important;
  box-shadow: 0 0 0 calc(var(--accessibility-focus-width) + 2px) rgba(255, 255, 0, 0.3) !important;
}

/* Reduce motion */
html.accessibility-reduce-motion *,
html.accessibility-reduce-motion *::before,
html.accessibility-reduce-motion *::after {
  animation-duration: 0.01ms !important;
  animation-iteration-count: 1 !important;
  transition-duration: 0.01ms !important;
  scroll-behavior: auto !important;
}

html.accessibility-reduce-motion .MuiLinearProgress-root .MuiLinearProgress-bar,
html.accessibility-reduce-motion .MuiCircularProgress-root {
  animation: none !important;
}

/* Respect user's motion preferences */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

/* Color blind support */
html.accessibility-color-blind .MuiChip-root {
  /* Use patterns and shapes instead of just colors */
  position: relative;
}

html.accessibility-color-blind .MuiChip-colorSuccess::before {
  content: '✓';
  margin-right: 4px;
}

html.accessibility-color-blind .MuiChip-colorError::before {
  content: '✗';
  margin-right: 4px;
}

html.accessibility-color-blind .MuiChip-colorWarning::before {
  content: '⚠';
  margin-right: 4px;
}

html.accessibility-color-blind .MuiChip-colorInfo::before {
  content: 'ℹ';
  margin-right: 4px;
}

/* Font size scaling */
html[data-accessibility-font-size="small"] {
  --accessibility-font-scale: 0.875;
}

html[data-accessibility-font-size="medium"] {
  --accessibility-font-scale: 1;
}

html[data-accessibility-font-size="large"] {
  --accessibility-font-scale: 1.125;
}

html[data-accessibility-font-size="extra-large"] {
  --accessibility-font-scale: 1.25;
  --accessibility-line-height-scale: 1.4;
}

/* Enhanced button styles for accessibility */
.accessibility-button-enhanced {
  min-height: 44px !important;
  min-width: 44px !important;
  padding: 12px 24px !important;
  border: 2px solid transparent !important;
  position: relative !important;
}

.accessibility-button-enhanced:hover {
  border-color: var(--accessibility-focus-color) !important;
}

.accessibility-button-enhanced:focus {
  border-color: var(--accessibility-focus-color) !important;
}

/* Enhanced link styles */
.accessibility-link-enhanced {
  text-decoration: underline !important;
  text-underline-offset: 4px !important;
  text-decoration-thickness: 2px !important;
}

.accessibility-link-enhanced:hover {
  text-decoration-thickness: 3px !important;
  background-color: rgba(0, 102, 204, 0.1) !important;
}

/* Skip navigation links */
.accessibility-skip-links {
  position: absolute;
  top: -40px;
  left: 6px;
  background: var(--accessibility-focus-color);
  color: white;
  padding: 8px 16px;
  text-decoration: none;
  border-radius: 4px;
  z-index: 9999;
  font-weight: bold;
  transition: top 0.3s;
}

.accessibility-skip-links:focus {
  top: 6px;
}

/* Screen reader only content */
.accessibility-sr-only {
  position: absolute !important;
  width: 1px !important;
  height: 1px !important;
  padding: 0 !important;
  margin: -1px !important;
  overflow: hidden !important;
  clip: rect(0, 0, 0, 0) !important;
  white-space: nowrap !important;
  border: 0 !important;
}

/* Enhanced form controls */
html.accessibility-enhanced-focus .MuiTextField-root .MuiOutlinedInput-root:focus-within {
  outline: var(--accessibility-focus-width) solid var(--accessibility-focus-color) !important;
  outline-offset: var(--accessibility-focus-offset) !important;
}

html.accessibility-enhanced-focus .MuiFormControlLabel-root:focus-within {
  outline: var(--accessibility-focus-width) solid var(--accessibility-focus-color) !important;
  outline-offset: var(--accessibility-focus-offset) !important;
  border-radius: 4px;
}

/* Enhanced data grid accessibility */
.accessibility-datagrid-enhanced .MuiDataGrid-cell:focus {
  outline: var(--accessibility-focus-width) solid var(--accessibility-focus-color) !important;
  outline-offset: -2px !important;
}

.accessibility-datagrid-enhanced .MuiDataGrid-columnHeader:focus {
  outline: var(--accessibility-focus-width) solid var(--accessibility-focus-color) !important;
  outline-offset: -2px !important;
}

/* Enhanced menu accessibility */
.accessibility-menu-enhanced .MuiMenuItem-root:focus {
  background-color: var(--accessibility-focus-color) !important;
  color: white !important;
  outline: none !important;
}

html.accessibility-high-contrast .accessibility-menu-enhanced .MuiMenuItem-root:focus {
  background-color: var(--accessibility-focus-high-contrast) !important;
  color: black !important;
}

/* Enhanced dialog accessibility */
.accessibility-dialog-enhanced {
  border: 3px solid var(--accessibility-focus-color) !important;
}

html.accessibility-high-contrast .accessibility-dialog-enhanced {
  border-color: var(--accessibility-border-high-contrast) !important;
}

/* Enhanced card accessibility */
.accessibility-card-enhanced:focus-within {
  outline: var(--accessibility-focus-width) solid var(--accessibility-focus-color) !important;
  outline-offset: var(--accessibility-focus-offset) !important;
}

/* Loading states accessibility */
.accessibility-loading-enhanced[aria-busy="true"]::after {
  content: attr(aria-label) " - טוען..." !important;
  position: absolute;
  left: -10000px;
  top: auto;
  width: 1px;
  height: 1px;
  overflow: hidden;
}

/* Print styles for accessibility */
@media print {
  html.accessibility-high-contrast {
    background: white !important;
    color: black !important;
  }
  
  html.accessibility-high-contrast * {
    background: white !important;
    color: black !important;
    border-color: black !important;
  }
}

/* RTL support for accessibility features */
html[dir="rtl"] .accessibility-skip-links {
  left: auto;
  right: 6px;
}

html[dir="rtl"] .accessibility-focus-enhanced {
  /* RTL specific focus adjustments */
  text-align: right;
}

/* Touch targets for mobile accessibility */
@media (max-width: 768px) {
  .accessibility-button-enhanced {
    min-height: 48px !important;
    min-width: 48px !important;
    padding: 14px 28px !important;
  }
  
  .MuiIconButton-root {
    min-height: 48px !important;
    min-width: 48px !important;
  }
  
  .MuiCheckbox-root,
  .MuiRadio-root {
    min-height: 48px !important;
    min-width: 48px !important;
  }
}

/* Keyboard navigation indicators */
.accessibility-keyboard-nav-active {
  /* Show focus indicators only when navigating with keyboard */
  position: relative;
}

.accessibility-keyboard-nav-active *:focus:not(:focus-visible) {
  outline: none !important;
  box-shadow: none !important;
}

.accessibility-keyboard-nav-active *:focus-visible {
  outline: var(--accessibility-focus-width) solid var(--accessibility-focus-color) !important;
  outline-offset: var(--accessibility-focus-offset) !important;
  box-shadow: 0 0 0 calc(var(--accessibility-focus-width) + 2px) rgba(0, 102, 204, 0.2) !important;
}

/* Announcement regions */
#accessibility-announcer {
  position: absolute !important;
  left: -10000px !important;
  top: auto !important;
  width: 1px !important;
  height: 1px !important;
  overflow: hidden !important;
}

/* Enhanced tooltips for accessibility */
.accessibility-tooltip-enhanced {
  font-size: calc(0.875rem * var(--accessibility-font-scale)) !important;
  padding: 8px 12px !important;
  background: #333 !important;
  color: white !important;
  border: 1px solid #666 !important;
  border-radius: 4px !important;
  max-width: 300px !important;
  word-wrap: break-word !important;
}

html.accessibility-high-contrast .accessibility-tooltip-enhanced {
  background: var(--accessibility-bg-high-contrast) !important;
  color: var(--accessibility-text-high-contrast) !important;
  border-color: var(--accessibility-border-high-contrast) !important;
}
